/*
Cause JS core @ 2019 River Zend Dynamics
Version 1.00 released on 2019-08-27
*/

class _Cause{constructor(e){this.parsedConfig={},this.config={},this.configNest=0,this.configArr=[],this.configCheck=[],this.concatConfig="",this.concatConfigCo="",this.concatConfigLen=0,this.currentPage="",this.currentPagePars="",this.currentPageID="",this.noURLChange=!1,this.currentMediaSrc="",this.hrefs={},this.ajaxResLocations={},this.pageList=[],this.eventState={},this.delayArr=[],this.cancelIDArr=[],this.cancelCustomArr=[],this.preloadedImages=[],this.selectors=[],this.setupEnded=!1,this.clickOutsideSet=!1,this.clickOutsideSels=[],this.mimicClones=[],this.currDocTitle=document.title,this.debugMode="",this.lineAttrX=/([^\:]+):([^\;]*)(;)?/,this.altX=/(\/\*[\s\S]*?\*\/)|((?!\*debugfile)[^\s\;\{\}][^\;\{\}]*(?=\{))|(\})|((?!\*debugfile)[^\;\{\}]+\;(?!\s*\*\/))|(\*debugfile[\s\S]*?\*)/gim,this.capComment=1,this.capSelector=2,this.capEnd=3,this.capAttr=4,this.capDebug=5,this.colonSels="^(link|visited|active|hover|focus|target|lang|first-child|last-child|first-of-type|last-of-type|nth-child|nth-last-child|nth-of-type|nth-last-of-type|only-child|only-of-type|empty|root|enabled|disabled|checked|not[(])",this.conditionals=[],this.components=[],this.mediaQueries=[],this.mediaQueriesOrig=[],this.newConfig=[],this.causeIDTrack=0,this.scriptTrack=[],this._debuggerActive=!1,this._debugger=!1,this._debuggerObjs={primSel:"",secSel:"",actVal:"",event:"",passCond:"",same:!1,debugEvCo:0,debugCo:0,debugSubCo:1},this._debuggerEvs=["afterLoadConfig"],this.configLine="",this.configFile=""}init(e){let t;for(t of("function"==typeof Cause._debugShow&&(Cause._debugger=!0,Cause._debuggerActive=!0),String.prototype._CjsCapitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)},String.prototype._CjsCapitalizeAttr=function(){return this.replace(/(^|[\s-])\S/g,function(e){return e.toUpperCase()})},String.prototype._CjsDecodeHTML=function(){var e=document.createElement("textarea");return e.innerHTML=this,e.value},String.prototype._CjsRepQuo=function(){var e=this.replace(/\\"/g,"_lionelritchie_");return e=(e=(e=(e=e.replace(/\\'/g,"_sayyousayme_")).replace(/["']/g,"")).replace(/_lionelritchie_/g,'"')).replace(/_sayyousayme_/g,"'")},e.configLocation=e.configLocation||"/cjs-config.txt",e.debugMode&&(this.debugMode=e.debugMode,self!=parent?console.log("CauseJS debug mode in iframe ID "+window.frameElement.id+": "+this.debugMode):console.log("CauseJS debug mode: "+this.debugMode)),this.configArr=e.configLocation.split(","),this.concatConfigLen=this.configArr.length,this.configArr))t=t.trim(),this._getFile(t,"txt","_AddConfig","_AddConfigError",{file:t})}_handleEvents(e,t,a=!1,s=null,r=null,l=null,n=null){if("string"!=typeof e&&!e||!Cause.selectors[t]||void 0===t)return!1;var c,i,u,o,d,C,f=[],_=[],p=Cause.selectors[t].length;if("string"!=typeof e)for(c=0;c<p;c++)-1===(i=l&&n?Cause._replaceAttrs(n,Cause.selectors[t][c],document):Cause.selectors[t][c]).indexOf("<")&&!_.includes(Cause.selectors[t][c])&&"~"!==i.substr(0,1)&&e.matches(i)&&_.push(Cause.selectors[t][c]);else _.push(e),e=n||e;var m=!1;p=_.length;let g,h,b,j,v,A,S="",y=["&","self","this"];for(d=0;d<p;d++)if(Cause.config[_[d]]&&Cause.config[_[d]][t]){if(a)return!0;let l;for(l in Cause.config[_[d]][t]){if(A="","0"!=l){if(!Cause._passesConditional(e,d,l,t,s))continue;A=l}if(!1!==(C=Cause.config[_[d]][t][l]))for(u in C)if("conds"!=u&&(v=Cause._splitIframeEls(u)))for(o in b=v[0],j=v[1],j=this._replaceAttrs(e,j,b),j=this._replaceAttrs(s,j,b),y.includes(j)&&(j="string"==typeof e?e:(S=Cause._getCauseID(e))?'[data-cause-id*="'+S+'"]':e),C[u])h="_a"+C[u][o].name._CjsCapitalizeAttr().replace(/\-/g,""),g=C[u][o].value,f.push({event:t,func:h,actName:C[u][o].name,secSel:j,origSecSel:u,actVal:g,origActVal:g,primSel:_[d],rules:C[u],obj:e,doc:b,ajaxObj:s,actEvent:r,passCond:A,file:C[u][o].file,line:C[u][o].line,causeID:S})}}var O=f.length;for(c=0;c<O;c++)this._performAction(f[c]),m=!0;return m}_aLoadConfig(e){e.actVal=e.actVal._CjsRepQuo().trim(),this.configArr.includes(e.actVal)?Cause._handleEvents(e.obj,"afterLoadConfig"):(e.file=e.actVal,this._getFile(e.actVal,"txt","_AddConfig","_AddConfigError",e))}_AddConfigError(e,t){Cause._handleEvents(t.obj,"loadconfigerror")}_AddConfig(e,t){if(Cause._debuggerActive){let a=e.match(/^.*((\r\n|\n|\r)|$)/gm),s="";for(let e=0;e<a.length;e++)s+="*debugfile:"+t.file+":"+(e+1)+"*"+a[e];e=s}this.concatConfig+=e,this.concatConfigCo++,this.concatConfigCo>=this.concatConfigLen&&this._readSiteMap(),this.concatConfigCo>this.concatConfigLen&&(this.configArr.push(t.actVal),"load-config"==t.actName&&Cause._debuggerActive&&Cause._debugUpdateConfig(),Cause._handleEvents(t.obj,"afterLoadConfig"))}_readSiteMap(){this.parsedConfig=this._parseConfig(this.concatConfig),this.concatConfig="",!!this.debugMode&&this._doDebug("parser")&&console.log(this.parsedConfig),this._makeVirtualConfig(),Cause.setupEnded||this._startMainListen(),Cause._debuggerActive&&Cause._debugShow(),Cause._initScriptTrack(),Cause._handleEvents("body","init");var e=document.querySelectorAll(":hover");if(e=e[e.length-1])for(;e.parentElement;)e=e.parentElement;Cause._handleEvents("body","scroll"),Cause.setupEnded||this._wrapUpStart()}_initScriptTrack(){document.querySelectorAll("script").forEach(function(e,t){Cause.scriptTrack.push(e.src)})}_wrapUpStart(){let e=Cause._resolveURL(window.location.href);window.history.replaceState(e,document.title,e),Cause.setupEnded=!0}_startMainListen(){window.addEventListener("message",function(e){if(e.origin===window.location.origin){var t=e.data,a=t.type.replace("cjs-","");switch(a){case"iframeClick":document.getElementById(t.el).contentWindow.document.querySelectorAll(".cjs__justclicked").foreach(function(e,t){if(e)return!Cause.clickOutsideSet||Cause._handleClickOutside(e)?(e.click(),!1):void Cause._removeClassObj(e,"cjs__justclicked")});break;case"unloading":case"loaded":let e=document.getElementById(t.el);Cause._handleEvents(e,a);break;case"draw":Cause._handleFragmentDraws(document,t.str)}}}),self==parent?window.addEventListener("popstate",function(e){Cause._unloadAllCancelDelayed();let t=e.state;Cause._debuggerActive&&Cause._debugOutput("Popstate event");let a=document.querySelector("#data-cause-page-list");if(t&&a){let e=new URL(t).pathname,s=a.querySelector('a[href="'+e+'"]');s&&Cause.trigger(s,"click")}else window.location.href=t}):(window.addEventListener("beforeunload",function(e){parent.postMessage({type:"cjs-unloading",el:window.frameElement.id},window.location.origin)}),parent.postMessage({type:"cjs-loaded",el:window.frameElement.id},window.location.origin)),this.currentPage=location.pathname;let e=document.body.outerHTML;this._handleFragmentDraws(document,e)}_unloadAllCancelDelayed(){let e,t,a;for(e in Cause.delayArr)for(t in Cause.delayArr[e])for(a in Cause.delayArr[e][t])clearTimeout(Cause.delayArr[e][t][a]),Cause.delayArr[e][t][a]=null;Cause.delayArr=[],Cause.cancelIDArr=[]}_parseConfig(e){var t={"{":"_cjs_brace_start","}":"_cjs_brace_end",";":"_cjs_semi_colon",":":"_cjs_colon"};return e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/\/\*[\s\S]*?\*\/|([^:]|^)\/\/.*$/gm,"")).replace(/[\r\n\t]+/gm,"")).replace(/\\\"/g,"_cjs_escaped_quote")).replace(/\$\{([a-z0-9_\-\.<\@>]+)\}/gi,function(e,t){return"_cjs_subst_brace_start"+(t=(t=(t=t.replace(".","_cjs_dot")).replace("[","_cjs_sqrbrace_start")).replace("]","_cjs_sqrbrace_end"))+"_cjs_subst_brace_end"})).replace(/\\{/g,"_cjs_brace_start")).replace(/\\}/g,"_cjs_brace_end")).replace(/(\|[a-z0-9_\- ]+{)([\s\S]*?)}/gi,function(e,t,a){return t+'{component: "'+(a=(a=a.replace(/_cjs_escaped_quote/g,'\\"')).replace(/"/g,"_cjs_escaped_quote"))+'";}'})).replace(/("([^"]|"")*")/g,function(e,a){return Cause._mapRegexReturn(t,a)})).replace(/([\(]([^\(\)]|\(\))*[\)])/g,function(e,a){return Cause._mapRegexReturn(t,a)}),(e=Cause._toJSON(e))[0]||console.log("Cause JS: Either your config is empty or there is a syntax error."),e}_mapRegexReturn(e,t){if("string"!=typeof t)return t;let a=new RegExp(Object.keys(e).join("|"),"gi");return t=t.replace(a,function(t){return e[t]})}_sortOutEscapeChars(e){return this._mapRegexReturn({_cjs_brace_start:"{",_cjs_brace_end:"}",_cjs_escaped_quote:'\\"',_cjs_semi_colon:";",_cjs_colon:":",_cjs_subst_brace_start:"${",_cjs_subst_brace_end:"}",_cjs_dot:".",_cjs_sqrbrace_start:"[",_cjs_sqrbrace_end:"]"},e)}_toJSON(e){let t,a,s,r,l,n={children:{},attributes:{}},c=null,i=0;for(;null!==(c=this.altX.exec(e));){if(Cause.configCheck>3||n[0]&&n[1]&&JSON.stringify(n[0])===JSON.stringify(n[1]))return console.log("Syntax error in config - possibly an incomplete set of curly brackets."),!1;if(c[this.capDebug])l=c[this.capDebug].split(":"),Cause.configFile=l[1],Cause.configLine=l[2].substr(0,l[2].length-1);else if(c[this.capSelector]){if(t=c[this.capSelector].trim(),Cause._debuggerActive&&(t=t.replace(/\*debugfile[\s\S]*?\*|([^:]|^)\/\/.*$/g,"")),Cause.configCheck++,!1===(r=this._toJSON(e)))return!1;Cause.configCheck--,(s={}).name=Cause._sortOutEscapeChars(t),s.value=Cause._sortOutEscapeChars(r),s.line=Cause.configLine,s.file=Cause.configFile,s.type="rule",n[i++]=s}else{if(c[this.capEnd])return n;if(c[this.capAttr]){var u=c[this.capAttr].trim();Cause._debuggerActive&&(u=u.replace(/\*debugfile[\s\S]*?\*|([^:]|^)\/\/.*$/g,""));var o=this.lineAttrX.exec(u);o?(t=o[1].trim(),a=o[2].trim(),(s={}).name=t,s.value=Cause._sortOutEscapeChars(a),s.type="attr",s.line=Cause.configLine,s.file=Cause.configFile,n[i++]=s):n[i++]=u}}}return Cause.configCheck--,n}_makeVirtualConfig(e="",t=""){var a,s,r,l,n,c,i,u,o=""!==e?e:Cause.parsedConfig;Object.keys(o).forEach(function(e){if(o[e].name)for(n=o[e].name,o[e].value,a=n.split(","),s=a.length,r=0;r<s;r++)switch((l=a[r].trim()).slice(0,1)){case"?":let s=l.substr(1);Cause.conditionals[s]=void 0===Cause.conditionals[s]?[]:Cause.conditionals[s],Cause.conditionals=Cause._iterateConditionals(Cause.conditionals,o[e].value,s);break;case"|":let d=l.substr(1);Cause.components[d]||(Cause.components[d]={}),Cause.components[d].data=o[e].value[0].value.slice(1,-1),Cause.components[d].data=Cause.components[d].data.replace(/\\\"/g,'"'),Cause.components[d].file=o[e].value[0].file,Cause.components[d].line=o[e].value[0].line;break;case"@":t=Cause._setupMediaQueryHandler(l.slice(7).trim()),Cause._makeVirtualConfig(o[e].value,t),t="";break;default:if("page-list"==l)Cause._iteratePageList(o[e].value);else{if(!(c=l.split(":"))[1]){console.log('"'+n+'" '+l+" is not a fully formed selector - it may be missing an event or have incorrect syntax.");continue}u=(u=c.shift()).trim(),i=(i=c.pop()).trim();let a,s=[],r=[];if(c){let e,t;for(t of c)(e=new RegExp(Cause.colonSels,"g")).test(t)?s.push(t):r.push(t)}""!==t&&r.push(t),s.length>0&&(u+=":"+s.join(":")),Cause._setupEvent(i,u),Cause.newConfig[u]=void 0===Cause.newConfig[u]?[]:Cause.newConfig[u],Cause.newConfig[u][i]=void 0===Cause.newConfig[u][i]?[]:Cause.newConfig[u][i],"clickoutside"==i&&(Cause.clickOutsideSels[u]=!1),a=0===r.length?0:r.join(" "),Cause.newConfig=Cause._iterateRules(Cause.newConfig,o[e].value,u,i,a)}}}),""===e&&(Cause.config=Cause.newConfig)}_doDebug(e,t){if(t){if(-1!==Cause.debugMode.indexOf(":")){let a=t.split(":");return-1!==Cause.debugMode.indexOf(a[0]+":"+e)}return-1!==Cause.debugMode.indexOf(t)||-1!==Cause.debugMode.indexOf(e)}return-1!==Cause.debugMode.indexOf(":")?-1!==Cause.debugMode.indexOf(e)&&Cause.debugMode.indexOf(":")!==Cause.debugMode.indexOf(e)-1:-1!==Cause.debugMode.indexOf(e)}_iteratePageList(e){if(!("content"in document.createElement("template")))return void console.log("Browser does not support html5. Cannot instantiate page navigation.");let t=document.createElement("template");var a,s;t.id="data-cause-page-list",Object.keys(e).forEach(function(r){(a=e[r].name)&&(-1!==Cause.pageList.indexOf(a)&&console.log("Config error: Page "+a+" is referenced twice."),s=e[r].value,t.insertAdjacentHTML("beforeend","<a href="+a.trim()+" "+s.trim()+">"))}),document.body.appendChild(t)}_iterateConditionals(e,t,a){var s,r;return Object.keys(t).forEach(function(l){(r=t[l].name)&&(s=e[a].length,e[a][s]={},e[a][s].name=r,e[a][s].value=t[l].value,e[a][s].file=t[l].file,e[a][s].line=t[l].line)}),e}_iterateRules(e,t,a,s,r){let l,n,c,i,u,o,d;return Object.keys(t).forEach(function(C){if(t[C].name)if("string"!=typeof t[C].value){for(l in n="",c="",t[C].value)if(void 0!==t[C].value[l].type)for(i=t[C].name.split(","),u=i.length,d=0;d<u;d++)o=i[d].trim(),e=Cause._AssignRule(e,a,s,r,o,t[C].value[l].name,t[C].value[l].value,t[C].file,t[C].line)}else e=Cause._AssignRule(e,a,s,r,"&",t[C].name,t[C].value,t[C].file,t[C].line)}),e}_AssignRule(e,t,a,s,r,l,n,c,i){let u,o;return void 0===e[t][a][s]&&(e[t][a][s]=[]),void 0===e[t][a][s][r]&&(e[t][a][s][r]=[]),-1!=(o=Cause._getPosOfRule(e[t][a][s][r],l))?(e[t][a][s][r][o].value+=", "+n,e[t][a][s][r][o].file+=","+c,e[t][a][s][r][o].line+=","+i,e):(u=e[t][a][s][r].length,e[t][a][s][r][u]={},e[t][a][s][r][u].name=l,e[t][a][s][r][u].value=n,e[t][a][s][r][u].file=c,e[t][a][s][r][u].line=i,e)}_setupKeyEvent(e,t){return"key"!=e.substr(0,3)||"keyup"!=e.substr(0,5)&&"keydown"!=e.substr(0,7)||"keyup"===e||"keydown"===e||(e="keyup"==e.substr(0,5)?"keyup":"keydown"),e}_setupEvent(e,t,a){void 0===Cause.selectors[e]&&(Cause.selectors[e]=[]);let s=e.substr(0,5);if(!(Cause.selectors[e].includes(t)||(Cause.selectors[e].push(t),Cause._debuggerEvs.includes(e)||(Cause._debuggerEvs.push(e),"after"==s&&"afterprint"!=e||(Cause._setupKeyEvent(e,s),"fullscreenEnter"!=e&&"fullscreenExit"!=e||(e="fullscreenchange"),Cause.eventState[e]))))){(self!=parent&&"body"==t&&"scroll"==e?document.body:window).addEventListener(e,function(t){if(!Cause.setupEnded&&!a)return;let s=!0;if(Cause._debuggerActive&&this.window!=t.target&&document.getElementById("cause-debug-inspector").contains(t.target)&&(s=!1),s)switch(e){case"click":t.ctrlKey||Cause._handleClick(t);break;case"keyup":case"keydown":Cause._handleEventEvents(e+t.key,t),Cause._handleEventEvents(e,t);break;case"fullscreenchange":Cause._handleEventEvents(e,t),document.fullscreenElement?Cause._handleEventEvents("fullscreenEnter",t):Cause._handleEventEvents("fullscreenExit",t);break;default:Cause._handleEventEvents(e,t)}},!0),Cause.eventState[e]=!0}}_handleEventEvents(e,t){var a;if(t.target==self||t.target.body)return Cause._handleEvents("body",e,!1,null,t),void Cause._handleEvents("window",e,!1,null,t);if(a=t.primSel?t.secSelObj:t.target,t.target==self||t.target.body||"mouseover"==e&&"A"==a.tagName&&1!==a["data-cause-nav"]&&Cause._setUpNavAttrs(a),"window"!=a)for(;a.parentNode&&!Cause._handleEvents(a,e,!1,null,t);)a=a.parentNode}_CheckForm(e,t){if(!e)return!1;for(var a,s,r,l,n,c,i="check"==t,u="pars"==t,o="",d=[],C=0,f=e.elements.length;C<f;C++)if(s=!1,(a=e.elements[C]).hasAttribute("name")){switch(a.nodeName.toLowerCase()){case"select":for(r=0,l=0,n=a.options.length;l<n;l++)c=a.options[l],s=s||c.selected!=a.defaultSelected,c.defaultSelected&&(r=l);s&&!a.multiple&&(s=r!=a.selectedIndex),o+="&"+a.getAttribute("name")+"="+encodeURIComponent(a.options[a.selectedIndex].value);break;case"textarea":case"input":switch(a.type.toLowerCase()){case"checkbox":s=a.checked!=a.defaultChecked,o+="&"+a.getAttribute("name")+"="+(a.checked?"on":"");break;case"radio":s=a.checked!=a.defaultChecked,a.checked&&(o+="&"+a.getAttribute("name")+"="+encodeURIComponent(a.value));break;default:s=a.value!=a.defaultValue,o+="&"+a.getAttribute("name")+"="+encodeURIComponent(a.value)}break;case"hidden":o+=u?"&"+a.getAttribute("name")+"="+encodeURIComponent(a.value):""}i&&s&&d.push(a)}return i?!!d.length:u?"_CJSFORMNAME="+(e.name?e.name:"")+o:void 0}_passesConditional(e,t,a,s,r,l){let n,c,i,u,o,d,C,f,_,p,m,g,h,b,j,v=a.split(" "),A=[],S="clickoutside"==s&&r?r:e,y=!1;for(p of v){if(m=Cause.conditionals[p],g=Cause._getRule(m,"exclude-elements")||"",g=-1!==(g=Cause._replaceAttrs(e,g,e.ownerDocument)).indexOf("${")?Cause._replaceAjaxVars(r,g):g){for(u of o=g.split(","))if(-1!==u.indexOf(" -> ")){if(!(d=Cause._splitIframeEls(u)))continue;if(C=d[0],u=d[1],f=d[2],o.includes(f))continue;if(_=Cause._CheckContainedWithin(C,u,S))return!1}else A.push(u);if(A.length>0&&(_=Cause._CheckContainedWithin(document,A.join(","),S)))return!1}if(m)for(n in m)if(m.hasOwnProperty(n)&&"exclude-elements"!=m[n].name&&("!"==(c=m[n]).name.substr(0,1)?(y=!1,i=c.name.substr(1)):(y=!0,i=c.name),i="_c"+i._CjsCapitalizeAttr().replace(/\-/g,""),"function"==typeof Cause[i])){let a=c.value.replace(/"[^"]+"|(\,)/g,function(e,t){return t?"_cjsComma":e});for(b=(h=(a=-1!==(a=Cause._replaceAttrs(e,a,e.ownerDocument)).indexOf("${")?Cause._replaceAjaxVars(r,a):a).split("_cjsComma")).length,j=0;j<b;j++)if(Cause[i]({func:i,actName:c.name,secSel:"conditional",actVal:h[j].trim(),primSel:t,primSelObj:e,rules:m,obj:null,doc:l,ajaxObj:r})!==y)return!1}}return!0}_CheckContainedWithin(e,t,a){return"body"==t?a!==document.body&&document.body.contains(a):(e.querySelectorAll(t).foreach(function(e,t){"ok"!=s&&(!e||e.isEqualNode(a)||e.contains(a))&&(s="ok")}),"ok"==s);var s}_handleClickOutside(e){var t,a;for(t in Cause.clickOutsideSels)if(Cause.clickOutsideSels[t]){a=!0;let r=e,l=!1;for(;r.parentNode;){if(r.id&&r.id==t.substr(1)){a=!1;break}(r.getAttribute("href")||Cause._handleEvents(r,"click",!0))&&(l=!0),r=r.parentNode}if(a&&l){var s=document.getElementById(t.substr(1));if(Cause._handleEvents(s,"clickoutside",!1,e)&&Cause.clickOutsideSels[t])return!1}}return!0}_aClickoutsideEvent(e){"true"==e.actVal?setTimeout(function(){Cause.clickOutsideSels[e.secSel]=!0,Cause.clickOutsideSet=!0},50):(Cause.clickOutsideSels[e.secSel]=!1,Cause.clickOutsideSet=!1)}_CheckClick(e,t){let a=t;for(;a.parentNode;){if(a.getAttribute("href")||Cause._handleEvents(a,"click",!0)){if(Cause._hasClassObj(a,"cjs__justclicked")){Cause._removeClassObj(a,"cjs__justclicked");break}return"function"==typeof e.preventDefault&&e.preventDefault(),Cause._AddClassObj(a,"cjs__justclicked"),parent.postMessage({type:"cjs-iframeClick",el:window.frameElement.id},window.location.origin),!1}a=a.parentNode}return!0}_handleClick(e){var t;if(e.primSel)t=e.secSelObj;else{if(0!==e.button)return;t=e.target}if("bypass"!=e.primSel){if(self!=parent&&!Cause._CheckClick(e,t))return!1;if(Cause.clickOutsideSet&&!Cause._handleClickOutside(t))return e.primSel||e.preventDefault(),!1}for(;t.parentNode;)t.getAttribute("data-media-src")&&(Cause.currentMediaSrc=t.getAttribute("data-media-src")),"A"==t.tagName&&1!==t["data-cause-nav"]&&Cause._setUpNavAttrs(t),Cause._handleEvents(t,"click",!1,null,e),t=t.parentNode;self!=parent&&Cause._handleEvents(window.frameElement,"click",!1,null,e)}_CloneAttrs(e,t){let a,s=Array.prototype.slice.call(t.attributes);for(a of s)"href"!=a.nodeName&&("class"==a.nodeName?Cause._AddClassObj(e,a.nodeValue):e.getAttribute(a.nodeName)||e.setAttribute(a.nodeName,a.nodeValue));e.setAttribute("data-cause-nav","1")}_setUpNavAttrs(e){let t,a,s;(t=document.querySelector("#data-cause-page-list"))&&(a=e.getAttribute("href"))&&(s=t.querySelector('a[href="'+a+'"]'))&&Cause._CloneAttrs(e,s)}_objByID(e,t){return t.getElementById(e)}_hasClassObj(e,t){return e.classList.contains(t)||!1}_removeClassObj(e,t){if(!e||!e.classList)return;let a=t.replace(".","").split(" ");e.classList.remove(...a)}_setClassObj(e,t){e&&e.classList&&(e.className=t)}_AddClassObj(e,t){if(!e||!e.classList)return;let a=t.replace(".","").split(" ");e.classList.add(...a)}_toggleClassObj(e,t){e&&e.classList&&e.classList.toggle(t)}_styleObj(e,t,a){e&&(e.style[t]=a)}_ConvertToMS(e,t){if("stack"==e)return 0;var a=/^(\d+)(ms|s)?$/i.exec(e);if(!a)return console.log(t),!1;var s=parseFloat(a[1]);return"s"==(a[2]||"ms").toLowerCase()?1e3*s:s}rand(e,t){return Math.floor(Math.random()*(t-e+1))+e}_eachRemoveClass(e,t,a){var s=this;a.querySelectorAll("."+e).forEach(function(e,a){e&&s._removeClassObj(e,t)})}ajax(e,t,a,s,r,l,n){var c,i=new XMLHttpRequest;switch(i.open(e,a,!0),t){case"html":case"txt":c="text/html";break;case"json":c="application/json";break;default:c="application/x-www-form-urlencoded"}i.setRequestHeader("Content-type",c),i.onreadystatechange=function(){if(4==i.readyState){if(200!=i.status){if(!l)return void console.log("Tried to get file: "+a+", but failed with error code: "+i.status);l(i.status,n)}null!==r&&r(i.responseText,n)}},"POST"==e&&null!==s?i.send(s):i.send()}_setsrcObj(e,t){e&&(e.src=t)}_setiframesrcObj(e,t){e&&e.contentWindow.location.replace(t)}_getIDsClasses(e){var t=document.createDocumentFragment();t.appendChild(document.createElement("div")),t.firstChild.innerHTML=e;var a,s,r,l,n=[],c=[];return t.firstChild.querySelectorAll("*").forEach(function(e){if(e.id&&(n[e.id]||n.push(e.id)),e.className&&(s=e.className.split(" ")))for(r=s.length,a=0;a<r;a++)(l=s[a])&&!c[l]&&c.push(l)}),t.firstChild.remove(),t=null,[c,n]}_getFile(e,t,a,s,r={}){a?this.ajax("GET",t,e,null,this[a].bind(this),this[s].bind(this),r):this.ajax("GET",t,e)}_splitIframeEls(e){let t,a,s,r;if(-1!==e.indexOf(" -> ")){if(!(t=e.split(" -> "))[1])return!1;"parent"==t[0]?window.parent.document?s=window.parent.document:console.log("No parent present to perform action on "+t[1]):s=window.document.querySelector(t[0]).contentWindow.document,a=t[1],r=t[0]}else a=e,s=window.document;return[s,a,r]}_performAction(e){if("complete"!=e.doc.readyState)return setTimeout(this._performAction.bind(this,e),200),!1;if("string"==typeof e.secSel&&-1!==e.secSel.indexOf("<@i>")){let t=/(.*)\$\{([a-zA-Z0-9\.<\@>]+)\}(.*)/g.exec(e.secSel);Cause._performActionLoop(t[2],e,e.ajaxObj.res,e.secSel)}else Cause._performActionDo(e)}_performActionLoop(e,t,a,s){let r,l,n=e.indexOf("<@"),c=0;if(-1!==n)if("i"!=(c=e.substr(n+2,e.indexOf(">")-n-1))){let s=e.indexOf("<@i>");a=(l=(l=(l=e.substr(0,s)).replace(/<\@/g,".")).replace(/>/g,"")).split(".").reduce(Cause._getObjFromDots,t.ajaxObj.res),r=!0}else r=!0,a=(l=e.substr(0,n)).split(".").reduce(Cause._getObjFromDots,t.ajaxObj.res);if(r){let e,r;r=a.length;let l=t.actVal;for(e=0;e<r;e++)t.secSel=s.replace("<@i>","<@"+e+">"),t.actVal=l,Cause._performActionDo(t,e)}else Cause._performActionDo(t)}_performActionDo(e,t){if(e.secSel="string"==typeof e.secSel?Cause._replaceAjaxVars(e.ajaxObj,e.secSel):e.secSel,!e.secSel)return;let a,s,r=e.actVal.replace(/"[^"]+"|(\,)/g,function(e,t){return t?"_cjsComma":e}).split("_cjsComma");for(a=r.length,s=0;s<a;s++){let a=Object.assign({},e);a.actVal=r[s].trim(),a.actPos=s,"number"==typeof t&&(a.actVal=a.actVal.replace("<@i>","<@"+t+">")),Cause._loopPerform(a)}}_loopPerform(e){if(Cause._debuggerActive&&Cause._debugOutput(e),"function"==typeof Cause[e.func])if("object"==typeof e.secSel)e.secSelObj=e.obj,Cause._handleFunc(e);else if("~"==e.secSel.substr(0,1))e.secSelObj={},Cause._handleFunc(e);else{let t=!1;"#"==e.secSel&&console.log("Error: "+e.primSel+" "+e.event+", "+e.actName+': "'+e.origSecSel+'" is being converted to "#". Attribute or variable is not present.'),e.doc.querySelectorAll(e.secSel).forEach(function(a,s){t=!0,e.secSelObj=a,Cause._handleFunc(e,!0)}),t||-1!==e.secSel.lastIndexOf("data-cause-id")&&(e.secSelObj=e.obj,e.actVal=Cause._replaceAttrs(e.obj,e.actValSing,e.doc,e.secSelObj),Cause._handleFunc(e))}Cause._debuggerActive&&Cause._debugOutputFeedback(e)}_handleFunc(e,t){let a;if(a="string"==typeof e.secSel&&"~"==e.secSel.substr(0,1)?e.secSel:Cause._getCauseID(e.secSelObj),-1!==e.actVal.indexOf(" after ")){let s=Object.assign({},e),r=this._delaySplit(s.actVal);if(s.actVal=r[1],s.actValSing=s.actVal,r&&r[0]>=0)return Cause.delayArr[a]=void 0!==Cause.delayArr[a]?Cause.delayArr[a]:[],Cause.delayArr[a][s.func]=void 0!==Cause.delayArr[a][s.func]?Cause.delayArr[a][s.func]:[],Cause.delayArr[a][s.func][s.actPos]&&(clearTimeout(Cause.delayArr[a][s.func][s.actPos]),Cause._removeCancel(a,s.func,s.actPos)),s.delayed=!0,void(Cause.delayArr[a][s.func][s.actPos]=setTimeout(Cause._handleFunc.bind(this,s,t),r[0]))}else e.actValSing=e.actVal;"string"==typeof e.secSel&&"~"==e.secSel.substr(0,1)&&Cause.cancelCustomArr[a]&&Cause.cancelCustomArr[a][e.func]&&Cause.cancelCustomArr[a][e.func][e.actPos]?Cause._removeCancel(a,e.func,e.actPos):e.delayed&&Cause.cancelIDArr[a]&&Cause.cancelIDArr[a][e.func]||(e.actVal=t?Cause._replaceAttrs(e.obj,e.actValSing,e.doc,e.secSelObj):Cause._replaceAttrs(e.obj,e.actValSing,e.doc),Cause[e.func](e),Cause._removeCancel(a,e.func,e.actPos),0===Object.keys(e.secSelObj).length&&-1===e.actName.indexOf("ajax")&&-1===e.actName.indexOf("load")&&Cause._handleEvents(e.secSelObj,"after"+e.actName._CjsCapitalizeAttr().replace(/\-/g,""),!1,e.secSelObj,e.actEvent,!0,e.obj))}_getWindow(e){return e.defaultView||e.parentWindow}_handleFragmentDraws(e,t,a){var s;if(e!=document)Cause._getWindow(e).postMessage({type:"cjs-draw",str:t},window.location.origin);else{var r,l,n,c,i=this._getIDsClasses(t),u=i[0].length,o=[];for(r=0;r<u;r++)if(-1===o.indexOf(i[0][r]))for(o.push(i[0][r]),n=(l=e.getElementsByClassName(i[0][r])).length,c=0;c<n;c++)this._handleEvents(l[c],"draw",!1,a);var d=i[1].length;for(o=[],r=0;r<d;r++)-1===o.indexOf(i[1][r])&&(o.push(i[1][r]),(s=e.getElementById(i[1][r]))&&this._handleEvents(s,"draw",!1,a))}}_delaySplit(e){let t=e.lastIndexOf('"')+1,a=t?e:e.substr(t).trim();if(!a.indexOf("after"))return null;let s,r=a.split(" "),l=0,n=null;for(s=r.length-1;s>=0&&"after"!=r[s];s--)"#"==r[s].substr(0,1)?n=r[s]:l=Cause._ConvertToMS(r[s],"Invalid delay number format.");return[l,e.substr(0,e.lastIndexOf("after")).trim(),n]}_getScrollX(e){return e.scrollX||e.pageXOffset||e.scrollLeft}_getRule(e,t){let a=this._getValFromList(e,t);if(!a)return a;var s={after:"aft"};return a.replace(/("([^"]|"")*")/g,function(e,t){return Cause._mapRegexReturn(s,t)}).indexOf("after")?a.substr(0,a.lastIndexOf("after")).trim():a}_aCancelDelayedAll(e){Cause._unloadAllCancelDelayed()}_aCancelDelayed(e){let t,a,s,r="_a"+e.actVal._CjsCapitalizeAttr().replace(/\-/g,""),l=!0;if(s="~"!=e.secSel.substr(0,1)?Cause._getCauseID(e.secSelObj):e.secSel){if(Cause.delayArr[s])if("all"==e.actVal)for(t in Cause.delayArr[s])for(a in Cause.delayArr[s][t])clearTimeout(Cause.delayArr[s][t][a]),Cause._removeCancel(s,t,a);else if(Cause.delayArr[s]&&Cause.delayArr[s][r])for(a in Cause.delayArr[s][r])clearTimeout(Cause.delayArr[s][r][a]),Cause._removeCancel(s,r,a);else l=!1;else l=!1;if(!l){let t,a=[];if(Object.keys(Cause.delayArr).forEach(function(t){"~"!=t.substr(0,1)&&e.doc.querySelectorAll(t).forEach(function(e,t){a.push(Cause._getCauseID(e))})}),"object"==typeof e.secSel)t=Cause._getCauseID(e.secSel),Cause.cancelIDArr[t]&&Cause.cancelIDArr[t][r]||!a.includes(t)||Cause._AddCancelAttr(e.secSel,r);else if("~"==e.secSel.substr(0,1)){if(!Cause.delayArr[s]&&!Cause.delayArr[s][r]&&!Cause.delayArr[s][r][e.actPos])return;Cause.cancelCustomArr.push([e.secSel][r][e.actPos])}else e.doc.querySelectorAll(e.secSel).forEach(function(e){t=Cause._getCauseID(e),Cause.cancelIDArr[t]&&Cause.cancelIDArr[t][r]||!a.includes(t)||Cause._AddCancelAttr(e,r)})}}}_AddCancelAttr(e,t){let a=e.getAttribute("data-cause-id");Cause.cancelIDArr[a]||(Cause.cancelIDArr[a]=[]),Cause.cancelIDArr[a][t]=!0}_removeCancel(e,t,a){Cause.delayArr[e]&&Cause.delayArr[e][t]&&(Cause.delayArr[e][t][a]=null),"~"==e.substr(0,1)?Cause.cancelCustomArr[e]&&Cause.cancelCustomArr[e][t]&&(Cause.cancelCustomArr[e][t][a]=null):Cause._removeCancelAttr(e,t)}_removeCancelAttr(e,t){Cause.cancelIDArr[e]&&Cause.cancelIDArr[e][t]&&(Cause.cancelIDArr[e][t]=null)}_aRemoveClass(e){return Cause._removeClassObj(e.secSelObj,e.actVal),!0}_aSetClass(e){let t=e.actVal.replace(/\./g,"");Cause._setClassObj(e.secSelObj,t)}_aToggleClass(e){let t=e.actVal.replace(/\./g,"");Cause._toggleClassObj(e.secSelObj,t)}_aTakeClass(e){if(e.doc!=document)return console.log("CJS error - you cannot take a class if the element clicked on is not going to take the class. With iframes, use give-class instead."),!1;let t=e.actVal.substr(1);Cause._eachRemoveClass(t,t,e.doc),Cause._aAddClass(e)}_aAddClass(e){Cause._AddClassObj(e.secSelObj,e.actVal)}_removeObj(e){e&&e.parentNode.removeChild(e)}_aRemove(e){let t,a=Cause._makeElementArray(e.actVal);for(t of a)Cause._selRemove(t)}_selRemove(e){e[0].querySelectorAll(e[1]).forEach(function(e,t){Cause._removeObj(e)})}_aIframeReload(e){e.secSelObj.contentWindow.location.reload(!0)}_AppendURIPar(e,t,a){var s=new RegExp("^([a-z]+://|//)","i");""!==e&&s.test(e)||(e=window.location.protocol+"//"+window.location.host+("/"!=e.substr(0,1)?"/":"")+e);let r,l,n=new URL(e),c=t.split("&"),i="";for(r of c)if(-1!==r.indexOf("="))(l=r.split("="))[1]?n.searchParams.set(l[0],l[1]):n.searchParams.set(l[0],"");else if("{#"==r.substr(0,2)){let e=r.slice(2,-1),t=a.getElementById(e);if("FORM"==t.tagName){let e=Cause._CheckForm(t,"pars"),s=Cause._AppendURIPar(n,e,a);n=new URL(s)}}else i+=r;return n+i}_aSrc(e){let t=e.secSelObj;if(t){var a=t,s=a.tagName,r=e.actVal.replace(/"/g,"");if(r=-1!==r.indexOf("${")?Cause._replaceAjaxVars(e.ajaxObj,r):r,"IFRAME"==s){if("blank"==r)r="data:text/html, <div></div>";else{var l=r.split("pars(");r=Cause._AppendURIPar(l[0],"_CJS=1&_CJSIFRAME=1",e.doc),r=Cause._AttachGetVals(e.actVal,r,e.doc,"pars")}var n=e.obj.getAttribute("data-iframe-height"),c=e.obj.getAttribute("data-iframe-width"),i=e.doc.querySelector(e.secSel).parentNode;"string"==typeof n?Cause._styleObj(i,"max-height",n):Cause._styleObj(i,"max-height",""),"string"==typeof c?Cause._styleObj(i,"max-width",c):Cause._styleObj(i,"max-width",""),Cause._setiframesrcObj(a,r,e.doc)}else Cause._setsrcObj(a,r,e.doc)}}_aScrollY(e){if("body"==e.secSel)if("top"==e.actVal)window.scrollTo({top:0});else if("bottom"==e.actVal){let e=document.createElement("div");e.id="causejs_scroll_hack",document.body.append(e),(e=document.getElementById("causejs_scroll_hack")).scrollIntoView(),document.body.removeChild(e)}else window.scrollTo({top:e.actVal,behavior:"smooth"});else{var t=e.secSelObj;t&&("top"==e.actVal?t.scrollTop=0:"bottom"==e.actVal?t.scrollTop=t.scrollHeight:t.scrollTop=e.actVal)}}_aScrollX(e){if("body"==e.secSel){Cause._getScrollX(e.doc);"left"==e.actVal?0:e.actVal}else{var t=e.secSelObj;"left"==e.actVal?t.scrollLeft=0:t.scrollLeft=pix}}_aFocusOff(e){Cause._aBlur(e)}_aBlur(e){document.activeElement.blur()}_getFocusedOfNodes(e){let t,a,s,r=-1,l=-1;if(!(t=Cause._splitIframeEls(e)))return!1;if(null===t[0].activeElement)return-1;for(s of a=t[0].querySelectorAll(t[1])||null)if(r++,s.isSameNode(t[0].activeElement)){l=r;break}return[a,l]}_aFocusOnFirst(e){Cause._aFocusOn(e)}_aFocusOnLast(e){Cause._aFocusOn(e,"l")}_aFocusOnNext(e){Cause._aFocusOn(e,"n")}_aFocusOnNextCycle(e){Cause._aFocusOn(e,"nc")}_aFocusOnPrevious(e){Cause._aFocusOn(e,"p")}_aFocusOnPreviousCycle(e){Cause._aFocusOn(e,"pc")}_aFocusOn(e,t){let a,s,r,l;if(-1!==["l","n","p","nc","pc"].indexOf(t))if("l"!=t)s=(r=Cause._getFocusedOfNodes(e.actVal))[0],l=r[1];else{if(targArr=Cause._splitIframeEls(e.actVal),!targArr)return!1;s=targArr[0].querySelectorAll(targArr[1])||null}switch(t){case"p":case"pc":if("p"==t){if(0===l)return}else 0===l&&(l=s.length);a=s[l-1];break;case"n":case"nc":if("n"==t){if(l==s.length-1)return}else l==s.length-1&&(l=-1);a=s[l+1];break;case"l":a=s[s.length-1];break;default:a=Cause._getSel(e,e.actVal)}a&&"FORM"==a.tagName?a.elements[0].focus():a.focus()}_replaceAttrs(e,t,a,s=null){return t.match(/<\@([0-9\.:]+|i)>/)?t:t.replace(/<\@([^\t\n\f \/>"'=]+)>/gi,function(t,a){if("i"==a)return"<@i>";let r,l=a.split("."),n=[];if(l[1]&&"selected"==l[0]&&"SELECT"==e.tagName){if(r=e.options[e.selectedIndex].getAttribute(l[1]))return Cause._escapeItem(r);if(r=e.options[e.selectedIndex][l[1]])return Cause._escapeItem(r);n.push("Neither attribute or property "+l[1]+" found in target or primary selector:")}else{let t=a.indexOf(":");if(-1!==t){let e=Cause._getObj(a.substr(0,t)),s=a.substr(t+1);if("IFRAME"==e.tagName&&"url"==s)return Cause._escapeItem(e.contentWindow.location.href);if(r=e.getAttribute(s))return Cause._escapeItem(r);if(r=e[s])return Cause._escapeItem(r);n.push("Neither attribute or property "+s+" found in target or primary selector:")}else if(e&&"string"!=typeof e){if(s){if(r=s.getAttribute(a))return Cause._escapeItem(r);if(r=s[a])return Cause._escapeItem(r)}if(r=e.getAttribute(a))return Cause._escapeItem(r);if(r=e[a])return Cause._escapeItem(r);n.push("Attribute not property "+a+" found in target or primary selector:")}}return n&&n.push(e),""})}_outDebug(e,t){if(e){let e;for(e of t)console.log(e)}}_aMediaControl(e){let t=e.secSelObj,a=e.actVal.split(" ");if(a[1])switch(a[1]=a[1]._CjsRepQuo(),a[0]){case"load":t.setAttribute("src",a[1]);break;case"seek":t.currentTime=a[1];break;case"volume":t.volume=a[1]}switch(a[0]){case"play":t.play();break;case"pause":t.pause();break;case"load":t.load()}}_aFullscreenOn(e){let t=e.secSelObj;t.requestFullscreen?t.requestFullscreen():elem.mozRequestFullScreen?t.mozRequestFullScreen():elem.webkitRequestFullscreen?t.webkitRequestFullscreen():elem.msRequestFullscreen&&t.msRequestFullscreen()}_aFullscreenExit(e){document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()}trigger(e,t){"object"==typeof e?Cause._handleEvents(e,t):Cause._aTrigger({secSel:e,actVal:t})}_aTriggerReal(e){if("click"==e.actVal){var t=new MouseEvent(e.actVal,{bubbles:!0,cancelable:!0,view:window});e.secSelObj.dispatchEvent(t)}}_aTrigger(e){"string"==typeof e.obj&&-1===e.obj.indexOf("<@")&&-1===e.obj.indexOf("${")?e.doc.querySelectorAll(e.obj).forEach(function(t,a){"~"==e.secSel.substr(0,1)?Cause._handleEvents(e.secSel,e.actVal,!1,e.ajaxObj||null,e.actEvent||null,!1,t):Cause._handleEvents(e.secSel,e.actVal,!1,e.ajaxObj||null,e.actEvent||null)}):"~"==e.secSel.substr(0,1)?Cause._handleEvents(e.secSel,e.actVal,!1,e.ajaxObj||null,e.actEvent||null,!1,e.obj||null):Cause._handleEvents(e.secSel,e.actVal,!1,e.ajaxObj||null,e.actEvent||null)}_getSel(e,t){switch(t){case"me":case"self":case"this":return e.secSelObj;default:return Cause._getObj(t)}}_aFormReset(e){let t=Cause._getSel(e,e.actVal);t&&"FORM"==t.tagName&&t.elements[0].reset()}_getFieldValType(e){switch(e.tagName){case"INPUT":return"value";default:return"innerHTML"}}_getValFromList(e,t,a=!1){let s,r,l,n=-1;for(s in e)if(e.hasOwnProperty(s)){if(n++,r=e[s],a&&r.name==t)return n;for(l in r)if(r.hasOwnProperty(l)&&!a&&r[l]==t)return r.value.replace(/"/g,"")}return!!a&&-1}_getPosOfRule(e,t){return Cause._getValFromList(e,t,!0)}_aClone(e){let t=Cause._getSel(e,e.actVal),a=t.getAttribute("data-cause-id");if(t)if("IFRAME"==t.tagName){if("complete"!=t.contentWindow.document.readyState)return setTimeout(this._aClone.bind(this,e),200),!1;Cause.mimicClones[a]=document.importNode(t.contentWindow.document.body,!0)}else Cause.mimicClones[a]=document.importNode(t,!0)}_aRestoreClone(e){let t=Cause._getSel(e,e.actVal),a=t.getAttribute("data-cause-id");if("IFRAME"==t.tagName){if("complete"!=t.contentWindow.document.readyState)return!1;setTimeout(function(){t.contentWindow.document.body=Cause.mimicClones[a]},0)}else setTimeout(function(){t.parentNode.replaceChild(Cause.mimicClones[a],t)},0)}_aRemoveClone(e){let t=Cause._getSel(e,e.actVal);causeID=Cause._getCauseID(t),causeID&&(Cause.mimicClones[causeID]=null)}_mimicReset(e){var t,a;for(t in e.target.cjsReset)if(e.target.cjsReset.hasOwnProperty(t))switch((a=e.target.cjsReset[t]).type){case"text":a.el.innerHTML=a.value;break;case"title":Cause.currDocTitle=a.value._CjsDecodeHTML(),document.title=Cause.currDocTitle}}_aUrlChange(e){let t=e.actVal.split(" ")[0],a=e.actVal.replace(t,"").trim();Cause._urlTitle(t,a,e)}_urlTitle(e,t,a){e=e.replace(/"/g,""),t=t.replace(/"/g,""),e=Cause._resolveURL(e),window.location.href!=e&&document.title!=t&&window.history.pushState(e,t,e),document.title=t}_resolveURL(e){let t=document.location.href,a=history.state,s=document.title;history.replaceState(a,s,e);let r=document.location.href;return history.replaceState(a,s,t),r}_aMimic(e){"title"==e.secSel?Cause._mimicDo(e):(e.el=e.secSelObj,Cause._mimicDo(e))}_mimicDo(e){let t,a,s;switch(e.secSel){case"title":t="title",a="title",s=Cause.currDocTitle;break;default:if(!(t=e.el))return;"INPUT"==t.tagName?(a="input",s=t.value):(a="text",s=t.innerHTML.trim())}var r=Cause._getFieldValType(e.obj);" "==e.obj[r].substr(0,1)&&("true"!=(Cause._getRule(e.rules,"mimic-allow-first-space")||"")&&(e.obj[r]=""));var l=0,n=e.obj.form||e.obj.closest("form");n.cjsReset||(n.cjsReset=[],n.addEventListener("reset",Cause._mimicReset));var c;switch(Cause._getValFromList(n.cjsReset,t)||(l=n.cjsReset.length,n.cjsReset[l]={},n.cjsReset[l].el=t,n.cjsReset[l].value=s,n.cjsReset[l].type=a),"title"==a&&(n.cjsReset[l].pref||(n.cjsReset[l].pref=s.replace(e.obj.defaultValue,""))),c=""===e.obj[r]?Cause._getRule(e.rules,"mimic-empty-value")||"":e.obj[r],a){case"input":t.value=c,t.value=t.value.replace(/(<\@([^>]+)>)/gi,"");break;case"text":t.innerHTML=c;break;case"title":Cause.currDocTitle=n.cjsReset[l].pref._CjsDecodeHTML()+c._CjsDecodeHTML(),document.title=Cause.currDocTitle}"title"!=a&&"true"==Cause._getRule(e.rules,"mimic-scroll")&&t.scrollIntoView({behaviour:"smooth",block:"center"})}_aScrollIntoView(e){let t=e.actVal.split(" "),a="start",s="nearest",r=Cause._optDef(t,"behaviour-smooth","smooth","auto");"true"==e.actVal||"false"==e.actVal&&(a="end"),a=Cause._optDef(t,"block-center","center",a),a=Cause._optDef(t,"block-end","end",a),a=Cause._optDef(t,"block-nearest","nearest",a),s=Cause._optDef(t,"inline-center","center",s),s=Cause._optDef(t,"inline-end","end",s),s=Cause._optDef(t,"inline-nearest","nearest",s),e.secSelObj.scrollIntoView({behaviour:r,block:a,inline:s})}_replaceAjaxVars(e,t,a=!0){return t=t.replace(/\$\{([a-zA-Z0-9\-_\.<\@>]+)\}/g,function(t,s){let r;return r="STRING"==s&&"string"==typeof e.res?e.res:(s=(s=s.replace(/<\@/g,".")).replace(/>/g,"")).split(".").reduce(Cause._getObjFromDots,e.res),(r=a?Cause._escapeItem(r):r)||""})}_getObjFromDots(e,t){return void 0===e[t]?"":e[t]}_makeElementArray(e){let t,a,s=e.split(","),r=[],l=0;for(t of s)(a=Cause._splitIframeEls(t))&&(r[l]=a,l++);return r}_getObj(e){let t=Cause._splitIframeEls(e);return!!t&&(t[0].querySelector(t[1])||null)}_aQuickHtmlBeforeBegin(e){e.htmlPos="beforebegin",Cause._aQuickHtml(e)}_aQuickHtmlAfterBegin(e){e.htmlPos="afterbegin",Cause._aQuickHtml(e)}_aQuickHtmlBeforeEnd(e){e.htmlPos="beforend",Cause._aQuickHtml(e)}_aQuickHtmlAfterEnd(e){e.htmlPos="afterend",Cause._aQuickHtml(e)}_aQuickHtml(e){let t=Cause._handleQuoAjax(e,e.actVal);t=Cause._replaceComponents(e,t),e.htmlPos?e.secSelObj.insertAdjacentHTML(e.htmlPos,content):e.secSelObj.innerHTML=t,Cause._handleFragmentDraws(e.doc,t,e.ajaxObj)}_replaceComponents(e,t,a){return t=t.replace(/\[([a-zA-Z0-9\.\-_]+)\]/g,function(t,s){if(!Cause.components[s])return"["+s+"]";let r=Cause.components[s].data;return r?(r=Cause._parseVars(r,e,a))||"":"["+s+"]"})}_parseVars(e,t,a=null){return null!==a&&(e=e.replace(/<@i>/gm,"."+a)),-1!==(e=Cause._replaceAttrs(t.obj,e,t.doc)).indexOf("${")?Cause._replaceAjaxVars(t.ajaxObj,e):e}_aRenderBeforeBegin(e){e.renderPos="beforebegin",Cause._aRender(e)}_aRenderAfterBegin(e){e.renderPos="afterbegin",Cause._aRender(e)}_aRenderBeforeEnd(e){e.renderPos="beforend",Cause._aRender(e)}_aRenderAfterEnd(e){e.renderPos="afterend",Cause._aRender(e)}_aRender(e){let t=e.actVal.trim().split(" "),a=!1,s=t[0];"concat("==s.trim().substr(0,7)&&(a=!0,t.shift());let r=Cause._handleQuoAjax(e,t.join(" "));if(a){let t=s.match(/concat\(\$\{([^\)]+)\}\)/)[1],a=e.ajaxObj.res[t];if(a){let t,s=Object.keys(a).length,l="";for(t=0;t<s;t++)l+=Cause._replaceComponents(e,r,t);Cause._renderIt(e,l)}else console.log(t+" was not found")}else r=Cause._replaceComponents(e,r),Cause._renderIt(e,r)}_renderIt(e,t){e.renderPos?e.secSelObj.insertAdjacentHTML(e.renderPos,t):e.secSelObj.innerHTML=t,Cause._handleFragmentDraws(e.doc,e.secSelObj.outerHTML,e.ajaxObj)}_escapeItem(e){let t=document.createElement("div");return t.textContent=e,t.innerHTML}_aAjaxFormPreview(e){e.formPreview=!0,Cause._aAjaxFormSubmit(e)}_aAjaxFormSubmit(e){e.formSubmit=!0;let t=e.secSelObj;t?(e.url=t.action,Cause._AjaxDo(e)):console.log("Form "+e.secSel+" not found.")}_aAjaxPreGet(e){e.preGet=!0,Cause._aAjax(e)}_optDef(e,t,a,s){return-1!=e.findIndex(e=>t===e.toLowerCase())?a:s}_AjaxDo(e){let t,a=e.actVal.split(" ");e.formMethod=Cause._optDef(a,"get","GET","POST"),e.dataType=Cause._optDef(a,"html","HTML","JSON"),e.cache=Cause._optDef(a,"cache",!0,!1),e.nocache=Cause._optDef(a,"nocache",!0,!1);let s=(e.nocache?"_="+Date.now()+"&":"")+"_CJS=1"+(e.formPreview?"&_CJSFORMPREVIEW=1":"")+(e.formSubmit?"&_CJSFORMSUBMIT=1":"")+"&_CJSTYPE="+e.dataType;if(e.pars=s,""===(t=e.url))return;e.formSubmit&&(e.pars+="&"+Cause._CheckForm(e.secSelObj,"pars")),"GET"==e.formMethod&&(t=Cause._AppendURIPar(t,e.pars,e.doc)),e.hash="";let r=t.indexOf("#");-1!==r&&(e.hash=t.substr(r+1),t=t.substr(0,r)),t=Cause._AttachGetVals(e.actVal,t,e.doc,"get-pars"),e.pars=Cause._AttachPostVals(e.actVal,e.pars),e.finalURL="GET"==e.formMethod?t:Cause._AppendURIPar(t,e.pars,e.doc),Cause.ajaxResLocations[e.finalURL]?e.preGet||(e.res=Cause.ajaxResLocations[e.finalURL],Cause._AjaxDisplay(e)):this.ajax(e.formMethod,e.dataType,t,e.pars,this._AjaxCallback.bind(this),this._AjaxCallbackErr.bind(this),e)}_getParVal(e,t){if(-1!==e.indexOf(t+"(")){let a=new RegExp(t+"[\\(]([\\S]+)[\\)]","g").exec(e)||"";if(a)return a[1]}return""}_AttachGetVals(e,t,a,s){let r=Cause._getParVal(e,s);return r&&(t=Cause._AppendURIPar(t,r,a)),t}_AttachPostVals(e,t){let a=Cause._getParVal(e,"post-pars");return a&&(t+="&"+a),t}_aAjax(e){let t=e.actVal.split(" ");e.url=t[0]._CjsRepQuo(),Cause._AjaxDo(e)}_AjaxCallbackErr(e,t){t.preGet?Cause._debuggerActive&&Cause._debugOutput('Ajax-pre-get callback error debug: failed with error "'+e+'".'):(t.error=!0,Cause._AjaxCallback(e,t),Cause._debuggerActive&&Cause._debugOutput('Ajax callback error debug: failed with error "'+e+'".'))}_AjaxCallback(e,t){"string"==typeof e&&""!==e.trim()?t.res="JSON"==t.dataType?JSON.parse(e):e:(t.res="",Cause._debuggerActive&&Cause._debugOutput(t)),!t.error&&t.preGet?Cause.ajaxResLocations[t.finalURL]=t.res:(Cause._AjaxDisplay(t),t.cache&&(Cause.ajaxResLocations[t.finalURL]=t.res))}_AjaxDisplay(e){Cause._handleEvents(e.obj,(e.error?"error":"after")+"Ajax"+(e.formSubmit?"Form"+(e.formPreview?"Preview":e.formSubmit?"Submit":""):""),!1,e),""!==e.hash&&(document.location.hash="",document.location.hash=e.hash)}_setupMediaQueryHandler(e){if(e=e.trim(),Cause.mediaQueriesOrig[e])return Cause.mediaQueriesOrig[e];let t="__mql_"+(Cause.mediaQueries.length+1);Cause.mediaQueriesOrig[e]=t,Cause.conditionals[t]=[],Cause.conditionals[t].push({name:"mql-true",value:t});let a=window.matchMedia(e),s=a.matches;return Cause.mediaQueries.push(t),Cause.mediaQueries[t]={ev:a,val:s},Cause.mediaQueries[t].ev.addListener(function(e){let t=Cause.mediaQueriesOrig[e.media];Cause.mediaQueries[t].val=e.matches}),t}_aPreventDefault(e){e.actEvent&&e.actEvent.preventDefault()}_aSetProperty(e){let t=e.actVal.split(" ");t[1]=Cause._handleQuoAjax(e,t[1]),e.secSelObj[t[0]]="true"==t[1]||"false"!=t[1]&&t[1]}_aRemoveProperty(e){e.secSelObj.removeProperty(e.actVal)}_aRemoveAttribute(e){e.secSelObj.removeAttribute(e.actVal)}_aSetAttribute(e){let t=e.actVal.split(" ");t[1]=Cause._handleQuoAjax(e,t[1]),e.secSelObj.setAttribute(t[0],t[1])}_handleQuoAjax(e,t){return t=-1!==(t=t._CjsRepQuo()).indexOf("${")?Cause._replaceAjaxVars(e.ajaxObj,t,"_aQuickHtml"!=e.func):t}_aLocation(e){let t=e.actVal._CjsRepQuo();e.doc.location.href=t}_aCopyToClipboard(e){if("true"==e.actVal){let t="readonly"==e.secSelObj.getAttribute("readonly");e.secSelObj.removeAttribute("readonly"),e.secSelObj.select(),document.execCommand("copy"),t&&e.secSelObj.setAttribute("readonly","readonly")}}_aLoadScript(e){let t=e.actVal._CjsRepQuo();if(!Cause.scriptTrack.includes(t)){let a=e.doc.createElement("script");a.src=t,e.doc.head.appendChild(a),Cause.scriptTrack.push(t)}}_getCauseID(e){if(e){let t="data-cause-id";if(e.hasAttribute(t))return e.getAttribute(t);{Cause.causeIDTrack++;let a="id-"+Cause.causeIDTrack;return e.setAttribute(t,a),a}}return!1}_aAlert(e){alert(e.actVal._CjsRepQuo())}_aConsoleLog(e){console.log(e.actVal._CjsRepQuo())}_aDebugLog(e){Cause._debugOutput(e.actVal._CjsRepQuo())}_aStyle(e){let t=Cause._handleQuoAjax(e,e.actVal).split(" "),a=t.shift();e.secSelObj.style[a]=t.join(" ")}_ConvertToVal(e){let t="";if("#"==e.substr(0,1)||"."==e.substr(0,1)){let a=document.querySelector(e);if(a){t=a[{INPUT:"value"}[a.tagName]]||a.innerHTML}}else t=e;return t}_aFunc(e){"function"!=typeof window[e.actVal]&&console.log(e.actVal+" is not a function."),window[e.actVal](e)}_ActValSelItem(e){let t=e.actVal.split(" "),a=t.splice(-1);return[Cause._getSel(e,t.join(" ")),a[0]]}_getAttribute(e){let t=Cause._ActValSelItem(e);return t[0]&&t[1]?t[1]:null}_ifVisible(e,t){let a=Cause._getSel(e,e.actVal).getBoundingClientRect(),s=a.top,r=a.bottom;return t?s>=0&&r<=window.innerHeight:s<window.innerHeight&&r>=0}_cMqlTrue(e){return Cause.mediaQueries[e.actVal].val}_ifFocus(e,t=!0){let a=Cause._getFocusedOfNodes(e.actVal);return t?0===a[1]:a[1]==a[0].length-1}_cIfAttributeExists(e){return Cause._getAttribute(e)}_cIfCompletelyVisible(e){return Cause._ifVisible(e,!0)}_cIfDisplay(e){let t=document.querySelector(e.actVal);return!(!t||"none"===getComputedStyle(t,null).display)}_cIfEmpty(e){return""===Cause._ConvertToVal(Cause._parseVars(e.actVal,e))}_cIfExists(e){return!!Cause._getSel(e,e.actVal)}_cIfFormChanged(e){return Cause._CheckForm(Cause._getSel(e,e.actVal),"check")}_cIfFunc(e){return window[e.actVal](e)}_cIfHasClass(e){let t=Cause._ActValSelItem(e);return!(!t[0]||!Cause._hasClassObj(t[0],t[1].substr(1)))}_cIfInnerHtml(e){let t=e.actVal.split(' "'),a=Cause._getSel(e,t[0]),s='"'+t[1];return!(!a||s._CjsRepQuo()!=a.innerHTML)}_cIfMaxLength(e){let t=e.actVal.split(" ");return Cause._ConvertToVal(Cause._parseVars(t[0],e)).length<=t[1]}_cIfMediaMaxWidth(e){return window.matchMedia("all and (max-width: "+e.actVal+")").matches}_cIfMediaMinWidth(e){return window.matchMedia("all and (min-width: "+e.actVal+")").matches}_cIfMinLength(e){let t=e.actVal.split(" ");return Cause._ConvertToVal(Cause._parseVars(t[0],e)).length>=t[1]}_cIfScrolltopGreater(e){return"body"==e.primSelObj?(window.pageYOffset||document.documentElement.scrollTop)>e.actVal:e.primSelObj.scrollTop>e.actVal}_cIfScrolltopLess(e){return"body"==e.primSelObj?(window.pageYOffset||document.documentElement.scrollTop)<e.actVal:e.primSelObj.scrollTop<e.actVal}_cIfVisible(e){return Cause._ifVisible(e)}_cIfFocusFirst(e){return Cause._ifFocus(e)}_cIfFocusLast(e){return Cause._ifFocus(e,!1)}}const Cause=new _Cause;